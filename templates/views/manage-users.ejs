<%- include('../partials/header'); %>
<div class="main-container">
    <h1 style="text-align: center;">Manage Users</h1>
    <%- include('../partials/flash-message') %>
    <div class="table-container">
        <table class="table">
            <thead>
                <th>Id</th>
                <th>Email</th>
                <th>Role</th>
            </thead>
            <tbody>
                <% users.forEach(user=> { %>
                    <tr>
                        <td>
                            <%= user.id %>
                        </td>
                        <td><a href="/admin/user/<%= user.id %>">
                                <%= user.email %>
                            </a></td>
                        <td>
                            <form action="/admin/update-role" method="post" class="manage-user-form">
                                <input type="hidden" name="id" value="<%= user.id %>" />
                                <select name="role" id="role">
                                    <option value="ADMIN" <%=user.role==='ADMIN' ? 'selected' : '' %> >Admin
                                    </option>
                                    <option value="MODERATOR" <%=user.role==='MODERATOR' ? 'selected' : '' %>
                                        >Moderator</option>
                                    <option value="CLIENT" <%=user.role==='CLIENT' ? 'selected' : '' %>>Client
                                    </option>
                                </select>
                                <input type="submit" value="update">
                            </form>
                        </td>
                    </tr>
                    <% }) %>
            </tbody>
        </table>
    </div>
</div>
<%- include('../partials/footer'); %>